<!DOCTYPE html>
<html lang="ms">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quiz Takaful | ZTakaful Interaktif</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #f5f7fb;
}

header {
  background: linear-gradient(135deg, #0a1f44, #0f3a7a);
  color: white;
  padding: 15px;
  text-align: center;
}

.quiz-container {
  max-width: 700px;
  margin: 20px auto;
  padding: 15px;
}

.quiz-card {
  background: white;
  padding: 20px;
  border-radius: 15px;
  box-shadow: 0 6px 15px rgba(0,0,0,0.1);
}

.quiz-title {
  font-size: 18px;
  font-weight: bold;
  margin-bottom: 15px;
  color: #0a1f44;
  text-align: center;
}

.quiz-question {
  font-size: 15px;
  margin-bottom: 15px;
  font-weight: bold;
}

.option-btn {
  display: block;
  width: 100%;
  padding: 10px;
  margin-bottom: 10px;
  border: none;
  background: #0a1f44;
  color: white;
  border-radius: 8px;
  cursor: pointer;
  font-size: 14px;
  transition: 0.2s ease;
}

.option-btn:hover {
  background: #0f3a7a;
}

.option-btn.correct {
  background: green;
}

.option-btn.wrong {
  background: red;
}

.quiz-footer {
  margin-top: 15px;
  text-align: center;
}

.control-btn {
  padding: 8px 15px;
  background: white;
  border: 1px solid #0a1f44;
  border-radius: 8px;
  font-weight: bold;
  cursor: pointer;
  margin: 5px;
}

.control-btn:hover {
  background: #0a1f44;
  color: white;
}

.score-box {
  text-align: center;
  font-size: 14px;
  margin-bottom: 10px;
  color: #0a1f44;
  font-weight: bold;
}

.quiz-select {
  margin-bottom: 10px;
  padding: 8px;
  width: 100%;
  border-radius: 8px;
  border: 1px solid #ccc;
}
</style>
</head>

<body>

<header>
  <h2>Ztakaful Interaktif App</h2>
  <p>Quiz Ilmu Takaful</p>
</header>

<div class="quiz-container">
  <div class="quiz-card">

    <div class="quiz-title">Quiz Interaktif</div>

    <select id="quizCategory" class="quiz-select" onchange="changeCategory()">
      <option value="general">Quiz Am Takaful</option>
      <option value="vehicle">Quiz Kereta & Motosikal</option>
      <option value="compare">Quiz Takaful vs Insurans</option>
      <option value="guess">Teka Bahagian Kereta & Motor</option>
    </select>

    <div class="score-box">
      Skor: <span id="score">0</span> / <span id="total">0</span>
    </div>

    <div class="quiz-question" id="question">Soalan akan muncul di sini</div>
    <div id="options"></div>

    <div class="quiz-footer">
      <button class="control-btn" onclick="nextQuestion()">Next</button>
      <button class="control-btn" onclick="restartQuiz()">Restart</button>
      <button class="control-btn" onclick="window.location.href='index.html'">Home</button>
    </div>

  </div>
</div>

<!-- SOUND EFFECTS -->
<audio id="soundCorrect" src="sounds/correct.mp3"></audio>
<audio id="soundWrong" src="sounds/wrong.mp3"></audio>

<script>
let score = 0;
let currentIndex = 0;
let currentCategory = "general";

let questions = {

  general: [
    { q: "Apakah tujuan utama Takaful?", 
      options: ["Perlindungan kewangan berasaskan perkongsian risiko", "Pelaburan saham", "Pinjaman peribadi", "Cukai kerajaan"], 
      answer: 0 },

    { q: "Apakah maksud 'tabarru’' dalam takaful?",
      options: ["Derma/sumbangan", "Pelaburan", "Pinjaman", "Premium"],
      answer: 0 },

    { q: "Dokumen rasmi perlindungan takaful dipanggil?",
      options: ["Sijil Takaful", "Resit Pajakan", "Polisi Bank", "Surat Jaminan"],
      answer: 0 },

    { q: "Siapa yang menguruskan dana risiko dalam takaful?",
      options: ["Pengendali Takaful", "Peserta", "Bank Negara", "Wakil Insurans"],
      answer: 0 },

    { q: "Apakah yang dimaksudkan dengan hibah dalam takaful?",
      options: ["Penamaan penerima manfaat", "Kadar sumbangan", "Had perlindungan", "Bonus tahunan"],
      answer: 0 },

    { q: "Risiko manakah TIDAK dilindungi dalam Takaful Kebakaran?",
      options: ["Kemalangan jalan raya", "Kebakaran", "Petir", "Letupan gas domestik"],
      answer: 0 },

    { q: "Apakah maksud 'contribution' dalam takaful?",
      options: ["Bayaran bulanan/ tahunan peserta", "Pulangan dividen", "Cukai perkhidmatan", "Kos tuntutan"],
      answer: 0 },

    { q: "Dana risiko dalam takaful dikongsi oleh?",
      options: ["Semua peserta takaful", "Kerajaan", "Wakil jualan", "Bank"],
      answer: 0 },

    { q: "Bilakah pampasan dibayar dalam takaful?",
      options: ["Apabila berlaku musibah yang dilindungi", "Setiap bulan", "Hanya apabila sijil matang", "Hanya selepas 10 tahun"],
      answer: 0 },

    { q: "Apa kelebihan takaful berbanding insurans konvensional?",
      options: ["Patuh Syariah", "Lebih berat", "Tiada perlindungan", "Hanya untuk golongan tertentu"],
      answer: 0 }
  ],

  vehicle: [
    { q: "Apakah maksud 'Comprehensive'?",
      options: ["Lindungi kereta sendiri + pihak ketiga", "Lindungi pihak ketiga sahaja", "Hanya cermin", "Hanya banjir"],
      answer: 0 },

    { q: "Apakah itu NCD?",
      options: ["Diskaun untuk tahun tanpa tuntutan", "Cukai jalan", "Nombor enjin", "Polisi khas motosikal"],
      answer: 0 },

    { q: "Risiko manakah biasanya TIDAK dilindungi tanpa add-on?",
      options: ["Banjir", "Kemalangan biasa", "Kecurian", "Kerosakan akibat pelanggaran"],
      answer: 0 },

    { q: "Apakah dokumen penting semasa membuat tuntutan?",
      options: ["Laporan polis", "Kad bank", "Sijil berhenti sekolah", "Gambar profil"],
      answer: 0 },

    { q: "Add-on 'windscreen' melindungi?",
      options: ["Cermin hadapan & tingkap", "Tayar", "Enjin", "Cat kereta"],
      answer: 0 },

    { q: "Apakah itu ‘Excess’?",
      options: ["Jumlah yang perlu dibayar peserta sebelum tuntutan dibayar", "Jumlah cukai pintu", "Jumlah penalti NCD", "Jumlah komisen ejen"],
      answer: 0 },

    { q: "Berapakah tempoh NCD maksimum kereta di Malaysia?",
      options: ["55%", "100%", "10%", "80%"],
      answer: 0 },

    { q: "Jenis perlindungan manakah wajib di Malaysia?",
      options: ["Third Party", "Comprehensive", "Fire & Theft", "Tiada yang wajib"],
      answer: 0 },

    { q: "Tuntutan 'Total Loss' bermaksud?",
      options: ["Kereta rosak teruk melebihi nilai tertentu", "Cermin retak", "Tayar botak", "Kereta hilang angin"],
      answer: 0 },

    { q: "Add-on SRCC merujuk kepada?",
      options: ["Strike, Riot, Civil Commotion", "Servis Radiator Coolant Cover", "Special Road Crash Cover", "Standard Repair & Check Charge"],
      answer: 0 }
  ],

  compare: [
    { q: "Apakah perbezaan asas takaful berbanding insurans?",
      options: ["Perkongsian risiko vs jualan risiko", "Lebih murah", "Tiada dokumen", "Tiada risiko"],
      answer: 0 },

    { q: "Dalam insurans, siapa pemilik dana risiko?",
      options: ["Syarikat insurans", "Peserta", "Kerajaan", "Bank"],
      answer: 0 },

    { q: "Dalam takaful, lebihan (surplus) boleh diagih kepada?",
      options: ["Peserta", "Bank Negara", "Wakil Takaful", "Cukai pendapatan"],
      answer: 0 },

    { q: "Kontrak takaful berdasarkan konsep apa?",
      options: ["Tabarru’ & Wakalah", "Pinjaman", "Konvensional", "Hadiah"],
      answer: 0 },

    { q: "Apakah istilah ‘premium’ dalam takaful?",
      options: ["Sumbangan", "Cukai", "Deposit", "Denda"],
      answer: 0 },

    { q: "Manakah yang TIDAK patuh syariah?",
      options: ["Insurans konvensional", "Takaful", "Dana Tabarru", "Konsep Wakalah"],
      answer: 0 },

    { q: "Dalam insurans, keuntungan hasil risiko dimiliki oleh?",
      options: ["Syarikat insurans", "Peserta", "Wakil", "Tabung haji"],
      answer: 0 },

    { q: "Dalam takaful, keuntungan hasil pengurusan dana dipanggil?",
      options: ["Wakalah fee", "Dividend", "Tax return", "NCD"],
      answer: 0 },

    { q: "Apakah persamaan takaful & insurans?",
      options: ["Kedua-duanya memberi perlindungan", "Kedua-duanya patuh syariah", "Dua-dua jamin untung", "Dua-dua tanpa risiko"],
      answer: 0 },

    { q: "Takaful mengelakkan unsur apa?",
      options: ["Gharar, riba, maisir", "Bonus", "Hadiah", "Pampasan"],
      answer: 0 }
  ],

  guess: [
    { q: "Bahagian manakah digunakan untuk menyejukkan enjin?",
      options: ["Radiator", "Alternator", "Absorber", "Fuel Pump"],
      answer: 0 },

    { q: "Komponen yang memulakan proses menghidupkan enjin ialah?",
      options: ["Starter Motor", "Radiator", "Axle", "Shock Absorber"],
      answer: 0 },

    { q: "Bahagian mana menghasilkan elektrik ketika kereta hidup?",
      options: ["Alternator", "Battery", "Compressor", "ECU"],
      answer: 0 },

    { q: "Komponen untuk menyerap hentakan jalan ialah?",
      options: ["Absorber", "Radiator", "Drive Shaft", "Fan Belt"],
      answer: 0 },

    { q: "Bahagian yang menyimpan tenaga elektrik kereta?",
      options: ["Battery", "Alternator", "Ignition Coil", "ECU"],
      answer: 0 },

    { q: "Apakah bahagian yang mengawal suhu dalam kabin?",
      options: ["Aircond Compressor", "Fuel Pump", "Catalytic Converter", "ECU"],
      answer: 0 },

    { q: "Komponen yang menukarkan bahan api kepada tenaga untuk enjin?",
      options: ["Fuel Injector", "Radiator", "Air Filter", "Alternator"],
      answer: 0 },

    { q: "Bahagian yang membantu menukar gear secara automatik?",
      options: ["Transmission", "Exhaust", "Fan Motor", "Head Unit"],
      answer: 0 },

    { q: "Apakah bahagian yang mengurangkan pencemaran asap enjin?",
      options: ["Catalytic Converter", "Fuel Tank", "Aircond Coil", "Carburetor"],
      answer: 0 },

    { q: "Komponen tempat enjin menerima udara bersih?",
      options: ["Air Filter", "Oil Sump", "ECU", "Throttle Body"],
      answer: 0 }
  ]
};

//
// READ CATEGORY FROM URL ?type=
//
const urlParams = new URLSearchParams(window.location.search);
const type = urlParams.get("type");
if (type && questions[type]) currentCategory = type;

document.getElementById("quizCategory").value = currentCategory;

function loadQuestion() {
  const qData = questions[currentCategory][currentIndex];

  document.getElementById("question").innerText = qData.q;
  document.getElementById("total").innerText = questions[currentCategory].length;
  document.getElementById("score").innerText = score;

  const optionsDiv = document.getElementById("options");
  optionsDiv.innerHTML = "";

  qData.options.forEach((opt, i) => {
    const btn = document.createElement("button");
    btn.classList.add("option-btn");
    btn.innerText = opt;
    btn.onclick = () => checkAnswer(btn, i, qData.answer);
    optionsDiv.appendChild(btn);
  });
}

//
// CHECK ANSWER WITH SOUND + HIGHLIGHT
//
function checkAnswer(button, selected, correct) {
  const all = document.querySelectorAll(".option-btn");

  all.forEach(b => b.disabled = true);

  if (selected === correct) {
    button.classList.add("correct");
    document.getElementById("soundCorrect").play();
    score++;
  } else {
    button.classList.add("wrong");
    document.getElementById("soundWrong").play();
    all[correct].classList.add("correct");
  }

  document.getElementById("score").innerText = score;
}

function nextQuestion() {
  currentIndex++;

  if (currentIndex >= questions[currentCategory].length) {
    alert("✔️ Quiz Tamat! Skor akhir: " + score);
    restartQuiz();
    return;
  }

  loadQuestion();
}

function restartQuiz() {
  currentIndex = 0;
  score = 0;
  loadQuestion();
}

function changeCategory() {
  currentCategory = document.getElementById("quizCategory").value;
  restartQuiz();
}

loadQuestion();
</script>

</body>
</html>
